# コーヒー焙煎モニター 取扱説明書

## 概要
このデバイスは、M5Stack CoreとKMeterISO温度センサーを使用したリアルタイム温度監視システムです。コーヒー豆の焙煎プロセスを正確に監視し、15分間の温度履歴をグラフィカルに表示できます。

## 基本操作

### デバイスの起動
1. M5Stack Coreの電源ボタンを押してデバイスを起動します
2. 「STANDBY MODE」画面が表示されます
3. KMeterISO温度センサーが自動的に接続されます

### 測定の開始
- **Cボタン（右側）**を短く押すと測定を開始します
- 画面上部に「Real-Time Temperature」と表示されます
- 現在の温度が大きく表示され、1秒間隔で更新されます

### 測定の停止
- 測定中に**Cボタン（右側）**を短く押すと測定を停止します
- 「STANDBY MODE」画面に戻ります

### データクリア
- **Cボタン（右側）**を**2秒間長押し**すると、すべてのデータがクリアされます
- 「*** DATA CLEARED ***」と表示されます

## 表示モード

### モード切り替え
測定中に**Aボタン（左側）**を押すことで、以下の4つのモードを順番に切り替えできます：

### 1. グラフモード（MODE_GRAPH）
- 15分間の温度履歴を折れ線グラフで表示
- 温度範囲：20℃～250℃（固定）
- リアルタイムで新しいデータポイントが追加されます
- 最大900データポイント（15分間）を記録

### 2. 統計モード（MODE_STATS）
- **現在温度**：リアルタイムの温度値
- **最高温度**：記録開始からの最高温度
- **最低温度**：記録開始からの最低温度
- **平均温度**：全データポイントの平均値
- **データポイント数**：記録されたデータの数

### 3. RoR（上昇率）モード（MODE_ROR）
- **RoR（Rate of Rise）**：60秒間での温度上昇率を表示
- 単位：℃/分
- 10分後の予測温度を表示
- RoRの評価：
  - **[OK] RoR: Good (3-8 C/min)**：理想的な上昇率
  - **[^] RoR: Fast (8-15 C/min)**：やや速い上昇率
  - **[!] RoR: Too Fast (>15 C/min)**：上昇率が速すぎ
  - **[v] RoR: Slow (0-3 C/min)**：遅い上昇率
  - **[-] RoR: Cooling**：温度低下中
- 直近5分間のRoRトレンドグラフ表示

### 4. 焙煎ガイドモード（MODE_GUIDE）

#### 焙煎レベル選択
- **Bボタン（中央）**で焙煎レベルを変更：
  - **Light Roast**（浅煎り）
  - **Medium Roast**（中煎り）
  - **Dark Roast**（深煎り）
- **Cボタン（右側）**でガイド開始

#### 焙煎段階
システムが自動的に以下の段階を判定し、ガイダンスを提供：

1. **Preheat**（予熱）: 180-200℃まで加熱
2. **Charge**（投入）: 豆を投入、温度低下
3. **Drying**（乾燥）: 120-160℃で水分除去
4. **Maillard**（メイラード反応）: 150-180℃で褐色化開始
5. **1st Crack**（1ハゼ）: 185-215℃で最初のハゼ
6. **Development**（発達段階）: 風味発達期間
7. **2nd Crack**（2ハゼ）: 210-240℃で2回目のハゼ
8. **Finish**（完了）: 豆の排出タイミング

#### ガイド表示内容
- 現在の焙煎段階と進行状況バー
- 経過時間（MM:SS形式）
- 目標温度範囲
- 推奨RoR範囲
- 現在の温度・RoRの状態評価
- 段階別のアドバイス

## ボタン操作まとめ

### 待機中（STANDBY MODE）
- **Cボタン**：測定開始
- **Cボタン長押し（2秒）**：データクリア

### 測定中
- **Aボタン**：表示モード切り替え
- **Bボタン**：統計リセット / 焙煎レベル変更
- **Cボタン**：測定停止 / 焙煎ガイド開始
- **Cボタン長押し（2秒）**：データクリア

## 技術仕様

### ハードウェア
- **プラットフォーム**：M5Stack Core ESP32
- **温度センサー**：M5Unit KMeterISO
- **通信方式**：I2C（100kHz）
- **ピン配置**：SDA=21, SCL=22
- **シリアル通信速度**：115200 baud

### データ仕様
- **測定間隔**：1秒
- **データバッファ**：900ポイント（15分間）
- **温度範囲**：20℃～250℃（表示範囲）
- **温度精度**：0.01℃（センサー仕様による）
- **RoR計算**：60秒間隔

### 表示仕様
- **ディスプレイ**：M5Stack LCD
- **グラフエリア**：300×160ピクセル
- **フォント**：日本語対応
- **カラー表示**：状態別色分け

## トラブルシューティング

### センサーエラー
「KMeter Err: X」が表示された場合：
1. 温度センサーの接続を確認
2. I2Cケーブルの接続状態をチェック
3. デバイスを再起動

### データが表示されない
1. 測定が開始されているか確認（Cボタンで開始）
2. センサーが正常に接続されているか確認
3. 必要に応じてデータクリア（Cボタン長押し）

### 画面表示の異常
1. デバイスを再起動
2. 異なる表示モードに切り替え（Aボタン）

## メンテナンス
- 定期的にデバイスの電源を完全に切って再起動
- 温度センサーの清掃（必要に応じて）
- データの定期的なクリア（長時間使用後）

## 注意事項
- 高温環境での使用時は十分注意してください
- 直射日光の当たる場所での使用は避けてください
- 水濡れに注意してください
- バッテリー残量に注意し、充電を行ってください

---

この取扱説明書は、コーヒー焙煎モニターの基本的な使用方法を説明しています。より詳細な技術情報については、ソースコードおよびCLAUDE.mdファイルを参照してください。